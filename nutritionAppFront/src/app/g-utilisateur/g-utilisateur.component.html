<app-header></app-header>
<div class="main-panel">
    <div class="container-scroller">
        <app-navbar></app-navbar>
        <div class="content-wrapper pb-0">
        <div class="page-header flex-wrap">
            <div class="header-left">
              <h2>Espace administrateur</h2>
                <!--Recherche utilisateur-->
                <div class="form-group row">
                    <div class="col-sm-9">
                        <input type="text" class="form-control" placeholder="Recherche..."
                        [(ngModel)]="searchWord">
                    </div>
                  </div>
            </div>
            <div class="header-right d-flex flex-wrap mt-2 mt-sm-0">
                <button type="button" class="btn btn-primary mt-2 mt-sm-0 btn-icon-text" (click)="onAjouterUtilisateur()">
                  <i class="mdi mdi-account-plus"></i> Ajouter Utilisateur 
                </button>
             
          </div>
          </div>
                <div class="card">
                  <div class="card-body">
                    <h4 class="card-title">La liste des utilisateurs</h4>
                  </div>
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr>
                            <th style="font-weight:bold;">Nom et Prénom</th>
                            <th style="font-weight:bold;" >Date d'inscription</th>
                            <th style="font-weight:bold;">Mail</th>
                            <th style="font-weight:bold;">Login</th>
                            <th style="font-weight:bold;">Id Role</th>
                            <th style="font-weight:bold;" >Etat</th>
                            <th style="font-weight:bold;" >Modifier</th>
                            <th style="font-weight:bold;">Supprimer</th>
                            <th style="font-weight:bold;">Initialiser</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let item of utiService.listUtilisateur | filter: searchWord">
                            <td>
                              {{ item.utiNom }}
                            </td> 
                             <td>
                              {{ item.utiDateCreation | date: 'dd/MM/yyyy'}}
                            </td>
                            <td>
                              {{ item.utiEmail }}
                            </td>
                            <td>
                              {{ item.utiLogin }}
                            </td>
                              {{ item.utiRole }} <!--{{ getRoleName(item.utiRole ) }}  -->                        
                            <td>
                              <ng-container *ngIf="item.utiEtat == false" >
                                <label class="badge badge-danger">Supprimé</label>
                              </ng-container>
                              <ng-container *ngIf="item.utiEtat == true" >
                                <label class="badge badge-success">Autorisé</label>
                              </ng-container>
                            </td>
                            <td> 
                                <button type="button" class="btn btn-inverse-info btn-icon" 
                                (click)="onModifierUtilisateur(item)"> 
                                <i class="mdi mdi-account-check"></i>
                                </button> 
                            </td>
                            <td>
                                <button type="button" class="btn btn-inverse-danger btn-icon"
                                mwlConfirmationPopover 
                                (confirm)="onSupprimerUtilisateur(item.utiId)"
                                popoverTitle="Êtes-vous sûr de vouloir supprimer le compte de cet utilisateur ?">
                                    <i class="mdi mdi-account-remove"></i>
                                </button>
                            </td>
                            <td>
                                <button type="button" class="btn btn-inverse-dark btn-icon" 
                                mwlConfirmationPopover
                                (confirm)="onInitialize(item.utiId)"
                                popoverTitle="Êtes-vous sûr de vouloir initialiser le compte de cet utilisateur ?">
                                    <i class="mdi mdi-account-convert"></i>
                                  </button>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  
                </div>
             
        
    </div>
</div>
</div>
<app-footer></app-footer>
